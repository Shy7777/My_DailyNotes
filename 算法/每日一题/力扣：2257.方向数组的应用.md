### **æ ¸å¿ƒæ‘˜è¦**  
**æ–¹å‘æ•°ç»„æ˜¯ä¸€ä¸ªå­˜å‚¨åæ ‡åç§»é‡çš„åˆ—è¡¨ï¼Œç”¨äºç®€æ´åœ°éå†ä¸Šä¸‹å·¦å³ï¼ˆæˆ–æ›´å¤šæ–¹å‘ï¼‰çš„ç›¸é‚»æ ¼å­**ï¼Œé¿å…é‡å¤å†™å››æ¬¡ç›¸ä¼¼çš„ä»£ç ã€‚

---

### **è¯¦ç»†è§£æ**  

#### 1. **ä¸ºä»€ä¹ˆéœ€è¦æ–¹å‘æ•°ç»„ï¼Ÿ**
åœ¨ç½‘æ ¼é—®é¢˜ä¸­ï¼ˆå¦‚æœ¬é¢˜ï¼‰ï¼Œç»å¸¸éœ€è¦å‘ **å››ä¸ªæ–¹å‘ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰** ç§»åŠ¨ã€‚  
- **ä¸ç”¨æ–¹å‘æ•°ç»„**ï¼šéœ€å†™å››æ¬¡å‡ ä¹ç›¸åŒçš„ä»£ç ï¼š
  ```python
  # å‘å³
  new_r, new_c = r, c + 1
  # å‘ä¸‹
  new_r, new_c = r + 1, c
  # å‘å·¦
  new_r, new_c = r, c - 1
  # å‘ä¸Š
  new_r, new_c = r - 1, c
  ```
- **ç”¨æ–¹å‘æ•°ç»„**ï¼šåªéœ€ä¸€ä¸ªå¾ªç¯ï¼š
  ```python
  directions = [(0,1), (1,0), (0,-1), (-1,0)]
  for dr, dc in directions:
      new_r, new_c = r + dr, c + dc
  ```

#### 2. **æ–¹å‘æ•°ç»„çš„å«ä¹‰**
æ¯ä¸ªå…ƒç»„ `(dr, dc)` è¡¨ç¤º **è¡Œå’Œåˆ—çš„åç§»é‡**ï¼š
| æ–¹å‘ | `dr`ï¼ˆè¡Œå˜åŒ–ï¼‰ | `dc`ï¼ˆåˆ—å˜åŒ–ï¼‰ | å…ƒç»„       |
|------|----------------|----------------|------------|
| å³   | `0`            | `+1`           | `(0, 1)`   |
| ä¸‹   | `+1`           | `0`            | `(1, 0)`   |
| å·¦   | `0`            | `-1`           | `(0, -1)`  |
| ä¸Š   | `-1`           | `0`           | `(-1, 0)`  |

> ğŸŒ° **ä¾‹å­**ï¼šå½“å‰åœ¨ `(2,3)`ï¼Œå‘å³ç§»åŠ¨ â†’ `(2+0, 3+1) = (2,4)`

#### 3. **åœ¨æœ¬é¢˜ä¸­çš„åº”ç”¨**
è­¦å«éœ€è¦å‘å››ä¸ªæ–¹å‘å»¶ä¼¸è§†çº¿ï¼Œæ–¹å‘æ•°ç»„è®©ä»£ç æ›´ç®€æ´ï¼š
```python
directions = [(0,1), (1,0), (0,-1), (-1,0)]  # å³ã€ä¸‹ã€å·¦ã€ä¸Š
for r, c in guards:
    for dr, dc in directions:  # éå†å››ä¸ªæ–¹å‘
        nr, nc = r + dr, c + dc  # ç¬¬ä¸€æ­¥
        while 0 <= nr < m and 0 <= nc < n:  # æ²¿è¯¥æ–¹å‘æŒç»­å‰è¿›
            if grid[nr][nc] in ['W', 'G']: 
                break  # é‡åˆ°é˜»æŒ¡åœæ­¢
            grid[nr][nc] = 1  # æ ‡è®°ä¸ºè¢«ä¿å«
            nr += dr  # ç»§ç»­æ²¿åŒä¸€æ–¹å‘ç§»åŠ¨
            nc += dc
```

---

### **å‰ç½®çŸ¥è¯†**  
**åæ ‡ç³»ä¸ç½‘æ ¼**ï¼š  
- ç½‘æ ¼é€šå¸¸ç”¨äºŒç»´æ•°ç»„è¡¨ç¤ºï¼Œ`grid[r][c]` ä¸­ `r` æ˜¯è¡Œå·ï¼ˆä»ä¸Šåˆ°ä¸‹é€’å¢ï¼‰ï¼Œ`c` æ˜¯åˆ—å·ï¼ˆä»å·¦åˆ°å³é€’å¢ï¼‰ã€‚
- **åç§»é‡ï¼ˆOffsetï¼‰**ï¼šæè¿°ä»å½“å‰ä½ç½®åˆ°ç›¸é‚»ä½ç½®çš„å˜åŒ–é‡ã€‚

---

### **å¸¸è§è¯¯åŒºä¸æ¾„æ¸…**  
1. **è¯¯åŒº**ï¼šæ–¹å‘æ•°ç»„çš„é¡ºåºä¼šå½±å“ç»“æœ  
   â†’ **æ­£è§£**ï¼šé¡ºåºæ— å…³ï¼ˆå³/ä¸‹/å·¦/ä¸Š æˆ– ä¸Š/å³/ä¸‹/å·¦å‡å¯ï¼‰ï¼Œåªè¦è¦†ç›–å››ä¸ªæ–¹å‘ã€‚

2. **è¯¯åŒº**ï¼šæ–¹å‘æ•°ç»„åªèƒ½ç”¨äºå››ä¸ªæ–¹å‘  
   â†’ **æ­£è§£**ï¼šå¯æ‰©å±•è‡³å…«æ–¹å‘ï¼ˆå¦‚åŠ ä¸Š `(1,1)`, `(-1,1)` ç­‰å¯¹è§’çº¿æ–¹å‘ï¼‰ã€‚

3. **è¯¯åŒº**ï¼šå¿…é¡»ç”¨å…ƒç»„å­˜å‚¨æ–¹å‘  
   â†’ **æ­£è§£**ï¼šä¹Ÿå¯ç”¨åˆ—è¡¨ï¼ˆå¦‚ `[0,1]`ï¼‰ï¼Œä½†å…ƒç»„æ›´è½»é‡ä¸”ä¸å¯å˜ã€‚

---

### **ç°å®ç±»æ¯”**  
æƒ³è±¡ä½ ç«™åœ¨åœ°å›¾ä¸Šçš„æŸä¸ªç‚¹ï¼Œæ–¹å‘æ•°ç»„å°±åƒä½ çš„ **â€œç§»åŠ¨æŒ‡ä»¤æ‰‹å†Œâ€**ï¼š  
- æ‰‹å†Œç¬¬ä¸€é¡µå†™ï¼šâ€œå‘ä¸œèµ° 1 æ­¥â€ â†’ `(0, +1)`  
- ç¬¬äºŒé¡µï¼šâ€œå‘å—èµ° 1 æ­¥â€ â†’ `(+1, 0)`  
- ...  
æ¯æ¬¡æŒ‰æ‰‹å†Œæ‰§è¡Œä¸€ä¸ªæŒ‡ä»¤ï¼Œå°±èƒ½ç³»ç»Ÿæ€§åœ°æ¢ç´¢æ‰€æœ‰æ–¹å‘ã€‚

---

### **å…¶ä»–å¸¸è§æ–¹å‘æ•°ç»„å˜ä½“**
| åœºæ™¯         | æ–¹å‘æ•°ç»„                                      |
|--------------|---------------------------------------------|
| å››æ–¹å‘       | `[(0,1), (1,0), (0,-1), (-1,0)]`           |
| å…«æ–¹å‘       | `[(0,1),(1,0),(0,-1),(-1,0),(1,1),(-1,-1),(1,-1),(-1,1)]` |
| ä»…ä¸Šä¸‹å·¦å³   | åŒå››æ–¹å‘                                    |
| èºæ—‹æ–¹å‘     | `[(0,1), (1,0), (0,-1), (-1,0)]`ï¼ˆé…åˆè½¬å‘é€»è¾‘ï¼‰ |

æŒæ¡æ–¹å‘æ•°ç»„åï¼Œç½‘æ ¼ç±»é—®é¢˜çš„ä»£ç ä¼šå˜å¾—æ›´æ¸…æ™°é«˜æ•ˆï¼

--- 
# åŠ›æ‰£ï¼š2257
### **æ ¸å¿ƒæ‘˜è¦**  
è¿™é“é¢˜çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š**æ¨¡æ‹Ÿæ¯ä¸ªè­¦å«çš„è§†çº¿èŒƒå›´ï¼Œæ ‡è®°æ‰€æœ‰è¢«ä¿å«çš„æ ¼å­ï¼Œæœ€åç»Ÿè®¡æœªè¢«æ ‡è®°çš„ç©ºæ ¼å­æ•°é‡**ã€‚

---

### **è¯¦ç»†è§£æ**  

#### 1. **é¢˜ç›®ç›®æ ‡**
- ç»™å®šä¸€ä¸ª `m x n` ç½‘æ ¼ï¼Œå…¶ä¸­æœ‰ **è­¦å«ï¼ˆguardsï¼‰** å’Œ **å¢™ï¼ˆwallsï¼‰**ã€‚
- è­¦å«èƒ½å‘ **ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘** çœ‹åˆ°æ‰€æœ‰æ ¼å­ï¼Œ**ç›´åˆ°é‡åˆ°å¢™æˆ–å¦ä¸€ä¸ªè­¦å«ä¸ºæ­¢**ã€‚
- è¦æ±‚ç»Ÿè®¡ **æ—¢ä¸æ˜¯è­¦å«ã€ä¹Ÿä¸æ˜¯å¢™ã€ä¹Ÿæ²¡æœ‰è¢«ä»»ä½•è­¦å«çœ‹åˆ°** çš„æ ¼å­æ•°é‡ã€‚

#### 2. **å…³é”®è§‚å¯Ÿ**
- **è§†çº¿ä¼šè¢«é˜»æŒ¡**ï¼šå¢™å’Œè­¦å«éƒ½ä¼šé˜»æŒ¡è§†çº¿ï¼ˆå³è§†çº¿ä¸èƒ½ç©¿è¿‡å®ƒä»¬ï¼‰ã€‚
- **åªéœ€æ ‡è®°è¢«ä¿å«çš„æ ¼å­**ï¼šä¸éœ€è¦çŸ¥é“æ˜¯å“ªä¸ªè­¦å«ä¿å«çš„ï¼Œåªè¦è¢«è‡³å°‘ä¸€ä¸ªè­¦å«çœ‹åˆ°å°±ç®—ã€‚

#### 3. **ç®—æ³•æ­¥éª¤**
1. **åˆå§‹åŒ–ç½‘æ ¼çŠ¶æ€**ï¼š
   - åˆ›å»ºä¸€ä¸ª `m x n` çš„ç½‘æ ¼ `grid`ï¼Œåˆå§‹å€¼ä¸º `0`ï¼ˆè¡¨ç¤ºæœªè¢«ä¿å«ï¼‰ã€‚
   - å°†æ‰€æœ‰ **å¢™** çš„ä½ç½®æ ‡è®°ä¸º `'W'`ã€‚
   - å°†æ‰€æœ‰ **è­¦å«** çš„ä½ç½®æ ‡è®°ä¸º `'G'`ã€‚

2. **æ¨¡æ‹Ÿæ¯ä¸ªè­¦å«çš„è§†çº¿**ï¼š
   - å¯¹æ¯ä¸ªè­¦å«ï¼Œå‘ **å››ä¸ªæ–¹å‘ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰** é€æ ¼æ£€æŸ¥ï¼š
     - å¦‚æœé‡åˆ° `'W'` æˆ– `'G'`ï¼Œåœæ­¢è¯¥æ–¹å‘çš„è§†çº¿ã€‚
     - å¦åˆ™ï¼Œå°†å½“å‰æ ¼å­æ ‡è®°ä¸º `1`ï¼ˆè¡¨ç¤ºè¢«ä¿å«ï¼‰ã€‚

3. **ç»Ÿè®¡ç»“æœ**ï¼š
   - éå†æ•´ä¸ªç½‘æ ¼ï¼Œç»Ÿè®¡æ‰€æœ‰ **æ—¢ä¸æ˜¯ `'W'`ã€ä¹Ÿä¸æ˜¯ `'G'`ã€ä¹Ÿä¸æ˜¯ `1`** çš„æ ¼å­æ•°é‡ã€‚

#### 4. **ç¤ºä¾‹æ¼”ç¤ºï¼ˆç¤ºä¾‹1ï¼‰**
- è¾“å…¥ï¼š`m = 4, n = 6`, `guards = [[0,0],[1,1],[2,3]]`, `walls = [[0,1],[2,2],[1,4]]`
- è­¦å« `[0,0]` å‘å³çœ‹ï¼Œé‡åˆ°å¢™ `[0,1]`ï¼Œæ‰€ä»¥åªèƒ½ä¿å« `[0,0]` è‡ªèº«ã€‚
- è­¦å« `[1,1]` å‘å››ä¸ªæ–¹å‘çœ‹ï¼Œèƒ½ä¿å«éƒ¨åˆ†æ ¼å­ï¼Œä½†è¢«å¢™é˜»æŒ¡ã€‚
- æœ€ç»ˆæœ‰ **7 ä¸ªæ ¼å­** æœªè¢«ä¿å«ã€‚

---

### **å‰ç½®çŸ¥è¯†**  
**æ¨¡æ‹Ÿï¼ˆSimulationï¼‰**ï¼š  
- ç›´æ¥æŒ‰ç…§é¢˜ç›®è§„åˆ™ï¼Œé€æ­¥æ¨¡æ‹Ÿæ¯ä¸ªè­¦å«çš„è§†çº¿è¿‡ç¨‹ã€‚
- æ—¶é—´å¤æ‚åº¦å–å†³äº **è­¦å«æ•°é‡ Ã— è§†çº¿é•¿åº¦**ï¼Œä½†é¢˜ç›®é™åˆ¶ `m * n <= 10^5`ï¼Œæ‰€ä»¥å¯è¡Œã€‚

**æ–¹å‘æ•°ç»„**ï¼š  
- ç”¨ `directions = [(0,1), (1,0), (0,-1), (-1,0)]` è¡¨ç¤ºå››ä¸ªæ–¹å‘ï¼ˆå³ã€ä¸‹ã€å·¦ã€ä¸Šï¼‰ã€‚

---

### **å¸¸è§è¯¯åŒºä¸æ¾„æ¸…**  
1. **è¯¯åŒº**ï¼šè®¤ä¸ºè­¦å«çš„è§†çº¿å¯ä»¥ç©¿è¿‡å…¶ä»–è­¦å«  
   â†’ **æ­£è§£**ï¼šè­¦å«å’Œå¢™ä¸€æ ·ä¼šé˜»æŒ¡è§†çº¿ï¼Œé‡åˆ°å³åœæ­¢ã€‚

2. **è¯¯åŒº**ï¼šç›´æ¥ç”¨ `set` å­˜å‚¨è¢«ä¿å«çš„æ ¼å­ï¼Œä½†å¿½ç•¥è§†çº¿é˜»æŒ¡é€»è¾‘  
   â†’ **æ­£è§£**ï¼šå¿…é¡»é€æ ¼æ£€æŸ¥ï¼Œé‡åˆ°é˜»æŒ¡å°±åœæ­¢ï¼Œä¸èƒ½ç›´æ¥æ ‡è®°æ•´è¡Œ/æ•´åˆ—ã€‚

3. **è¯¯åŒº**ï¼šå¿˜è®°è­¦å«è‡ªèº«å æ®çš„æ ¼å­ä¸ç®—â€œæœªè¢«ä¿å«â€  
   â†’ **æ­£è§£**ï¼šè­¦å«å’Œå¢™çš„æ ¼å­éƒ½ä¸è®¡å…¥æœ€ç»ˆç»“æœã€‚

---

### **ä»£ç æ¡†æ¶ï¼ˆPythonï¼‰**
```python
def countUnguarded(self, m: int, n: int, guards: List[List[int]], walls: List[List[int]]) -> int:
    # åˆå§‹åŒ–ç½‘æ ¼
    grid = [[0] * n for _ in range(m)]
    
    # æ ‡è®°å¢™å’Œè­¦å«
    for r, c in walls:
        grid[r][c] = 'W'
    for r, c in guards:
        grid[r][c] = 'G'
    
    # å››ä¸ªæ–¹å‘
    directions = [(0,1), (1,0), (0,-1), (-1,0)]
    
    # æ¨¡æ‹Ÿæ¯ä¸ªè­¦å«çš„è§†çº¿
    for r, c in guards:
        for dr, dc in directions:
            nr, nc = r + dr, c + dc
            while 0 <= nr < m and 0 <= nc < n:
                if grid[nr][nc] == 'W' or grid[nr][nc] == 'G':
                    break  # é‡åˆ°é˜»æŒ¡ï¼Œåœæ­¢
                if grid[nr][nc] == 0:
                    grid[nr][nc] = 1  # æ ‡è®°ä¸ºè¢«ä¿å«
                nr += dr
                nc += dc
    
    # ç»Ÿè®¡æœªè¢«ä¿å«çš„æ ¼å­
    count = 0
    for i in range(m):
        for j in range(n):
            if grid[i][j] == 0:
                count += 1
    return count
```

---

### **ä¼˜åŒ–æç¤º**  
- **ç©ºé—´ä¼˜åŒ–**ï¼šå¯ä»¥ç”¨ä¸åŒæ•´æ•°ä»£æ›¿ `'W'`/`'G'`ï¼ˆå¦‚ `2` è¡¨ç¤ºå¢™ï¼Œ`3` è¡¨ç¤ºè­¦å«ï¼‰ï¼Œé¿å…å­—ç¬¦ä¸²æ“ä½œã€‚
- **æå‰ç»ˆæ­¢**ï¼šå¦‚æœæŸä¸ªæ–¹å‘å·²ç»è¶…å‡ºç½‘æ ¼ï¼Œç›´æ¥è·³è¿‡ã€‚

